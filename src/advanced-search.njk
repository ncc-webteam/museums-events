{% set title = "Advanced search - Museums Events" %}

{% extends "template.njk" %}
{% import "_pattern_macros/general_card.njk" as generalcard %}

{% block main %}
  <section class="museums-events-stage" style="background: linear-gradient(to right, rgba(0, 35, 93, 0.8), rgba(0, 35, 93, 0.8)), url('/museums-events/public/img/stage-img-1.jpg');">
    <div class="container">
      <div class="stage-search">
        <h1 class="text-center mt-sm-4 mb-sm-5">Museums event search</h1>
        <form class="form-inline d-flex stage-search" action="/search.html">
          <input class="form-control mr-sm-2" type="search" placeholder="For example &quot;Roman&quot;" aria-label="Search">
          <button id="home-search-button" class="btn btn-outline-light d-inline-flex" type="submit"><span class="search-text-long">Search events</span><span class="search-text-short">Find</span></button>
        </form>
        <div class="filters-wrapper my-3">
          <div class="filters-1 d-flex flex-sm-row flex-column">
            <div style="margin-right: 10px">
              <h2 class="h5">Date to</h2>
              <button class="btn btn-primary filter-btn date-filter">YYYY-MM-DD<div class="icon-space"><svg xmlns="http://www.w3.org/2000/svg" height="36" width="40" viewBox="-30 -3 78 50"><path d="M9 44q-1.2 0-2.1-.9Q6 42.2 6 41V10q0-1.2.9-2.1Q7.8 7 9 7h3.25V4h3.25v3h17V4h3.25v3H39q1.2 0 2.1.9.9.9.9 2.1v31q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h30V19.5H9V41Zm0-24.5h30V10H9Zm0 0V10v6.5ZM24 28q-.85 0-1.425-.575Q22 26.85 22 26q0-.85.575-1.425Q23.15 24 24 24q.85 0 1.425.575Q26 25.15 26 26q0 .85-.575 1.425Q24.85 28 24 28Zm-8 0q-.85 0-1.425-.575Q14 26.85 14 26q0-.85.575-1.425Q15.15 24 16 24q.85 0 1.425.575Q18 25.15 18 26q0 .85-.575 1.425Q16.85 28 16 28Zm16 0q-.85 0-1.425-.575Q30 26.85 30 26q0-.85.575-1.425Q31.15 24 32 24q.85 0 1.425.575Q34 25.15 34 26q0 .85-.575 1.425Q32.85 28 32 28Zm-8 8q-.85 0-1.425-.575Q22 34.85 22 34q0-.85.575-1.425Q23.15 32 24 32q.85 0 1.425.575Q26 33.15 26 34q0 .85-.575 1.425Q24.85 36 24 36Zm-8 0q-.85 0-1.425-.575Q14 34.85 14 34q0-.85.575-1.425Q15.15 32 16 32q.85 0 1.425.575Q18 33.15 18 34q0 .85-.575 1.425Q16.85 36 16 36Zm16 0q-.85 0-1.425-.575Q30 34.85 30 34q0-.85.575-1.425Q31.15 32 32 32q.85 0 1.425.575Q34 33.15 34 34q0 .85-.575 1.425Q32.85 36 32 36Z"/></svg></div></button></div>
            <div class="my-sm-0 my-3">
              <h2 class="h5">Date from</h2>
              <button class="btn btn-primary filter-btn date-filter">YYYY-MM-DD<div class="icon-space"><svg xmlns="http://www.w3.org/2000/svg" height="36" width="40" viewBox="-30 -3 78 50"><path d="M9 44q-1.2 0-2.1-.9Q6 42.2 6 41V10q0-1.2.9-2.1Q7.8 7 9 7h3.25V4h3.25v3h17V4h3.25v3H39q1.2 0 2.1.9.9.9.9 2.1v31q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h30V19.5H9V41Zm0-24.5h30V10H9Zm0 0V10v6.5ZM24 28q-.85 0-1.425-.575Q22 26.85 22 26q0-.85.575-1.425Q23.15 24 24 24q.85 0 1.425.575Q26 25.15 26 26q0 .85-.575 1.425Q24.85 28 24 28Zm-8 0q-.85 0-1.425-.575Q14 26.85 14 26q0-.85.575-1.425Q15.15 24 16 24q.85 0 1.425.575Q18 25.15 18 26q0 .85-.575 1.425Q16.85 28 16 28Zm16 0q-.85 0-1.425-.575Q30 26.85 30 26q0-.85.575-1.425Q31.15 24 32 24q.85 0 1.425.575Q34 25.15 34 26q0 .85-.575 1.425Q32.85 28 32 28Zm-8 8q-.85 0-1.425-.575Q22 34.85 22 34q0-.85.575-1.425Q23.15 32 24 32q.85 0 1.425.575Q26 33.15 26 34q0 .85-.575 1.425Q24.85 36 24 36Zm-8 0q-.85 0-1.425-.575Q14 34.85 14 34q0-.85.575-1.425Q15.15 32 16 32q.85 0 1.425.575Q18 33.15 18 34q0 .85-.575 1.425Q16.85 36 16 36Zm16 0q-.85 0-1.425-.575Q30 34.85 30 34q0-.85.575-1.425Q31.15 32 32 32q.85 0 1.425.575Q34 33.15 34 34q0 .85-.575 1.425Q32.85 36 32 36Z"/></svg></div></button>
            </div>
          </div>
          <div class="filters-2">
            <div>
              <h2 class="h5">Refine</h2>
              <div class="filter-separator">
                <button id="dropdown-filter-type" data-bs-toggle="dropdown" aria-expanded="false"  data-bs-auto-close="outside" type="button" class="btn btn-primary filter-btn">Type</button>
                      <ul class="dropdown-menu" aria-labelledby="dropdown-filter-type">
                        <div class="dropdown-top-section">
                          <h3 class="dropdown-heading h4">Event type</h3>
                          <button type="button" class="btn-close" data-bs-dismiss="dropdown" aria-label="Close"></button>
                        </div>
                        <li class="selection-item">
                          <label class="form-check-label" for="type1check">
                            <input type="checkbox" class="form-check-input" name="typeOption" value="Roman" id="type1check">
                            <div class="text-wrapper">
                              Roman 
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="type2check">
                            <input type="checkbox" class="form-check-input" name="typeOption" value="Saxons" id="type2check">
                            <div class="text-wrapper">
                              Saxons 
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="type3check">
                            <input type="checkbox" class="form-check-input" name="typeOption" value="Tudor" id="type3check">
                            <div class="text-wrapper">
                              Tudor 
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="type4check">
                            <input type="checkbox" class="form-check-input" name="typeOption" value="Victorian" id="type4check">
                            <div class="text-wrapper">
                              Victorian 
                            </div>
                          </label>
                        </li>
                        <li class="selection-item">
                          <label class="form-check-label" for="type5check">
                            <input type="checkbox" class="form-check-input" name="typeOption" value="Modern" id="type5check">
                            <div class="text-wrapper">
                              Modern 
                            </div>
                          </label>
                        </li>
                        <ul class="dropdown-bottom-section">
                          <li><button class="filter-control-btn clear-filter" type="button" onclick="clearFiltersType()">Clear filters</button></li>
                          <li><button class="filter-control-btn apply-filter" type="button" onclick="applyFiltersType(this.form.typeOption)">Apply filters</button></li>
                        </ul>
                      </ul>
                <button id="dropdown-filter-location" data-bs-toggle="dropdown" aria-expanded="false"  data-bs-auto-close="outside" type="button" class="btn btn-primary filter-btn">Location</button>
                <button id="dropdown-filter-audience" data-bs-toggle="dropdown" aria-expanded="false"  data-bs-auto-close="outside" type="button" class="btn btn-primary filter-btn">Audience</button>
                <button id="modal-filter-all" type="button" class="btn btn-primary filter-btn filter-btn-all">Filters</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section>
    <div class="container">
      <div class="row {{rowDefaults}}" id="page-1">
        <div class="col-12 col-sm-6 col-lg-4">
          {{ generalcard.generalcard("Where's Wookie?", 'Time & Tide • Great Yarmouth', 'Monday 17 May 2021 • 10:00 - 16:00', 'Free', '', 'The Wookies have gone into hiding as they spotted Storm Troopers in our exhibition. Can you help us find them amongst our collections?', 'museums-events/event1.jpg', '/example-event/', 'card-light museum-card time-and-tide') }}
        </div>
        <div class="col-12 col-sm-6 col-lg-4">
          {{ generalcard.generalcard('A Fish Tail Trail', 'Cromer Museum • Cromer', 'Monday 17 May 2021 • 10:00 - 16:00', 'Free', '', "It's not Nemo that needs to be found this time, but our local fishy friends. Help them find their tails (and claws) which have been scattered around the museum and learn some fin-tastic facts.", 'museums-events/event2.jpg', '/example-event/', 'card-light museum-card cromer') }}
        </div>
        <div class="col-12 col-sm-6 col-lg-4">
          {{ generalcard.generalcard('How to be an Elizabethan Trail', 'Acle • Acle Library', 'Monday 17 May 2021 • 10:00 - 16:00', 'Free', '', 'A Beginners guide to the “Golden Age” Ever wanted to know how to fit into Elizabethan society? Well this is your perfect starter guide! Follow the trail to find out some fantastic facts.', 'museums-events/event3.jpg', '/example-event/', 'card-light museum-card elizabethan') }}
        </div>
      </div>
      <div class="row {{rowDefaults}}" id="page-2" style="display: none;">
        <div class="col-12 col-sm-6 col-lg-4">
          {{ generalcard.generalcard("Where's Wookie?", 'Acle • Acle Library', 'Monday 17 May 2021 • 10:00 - 16:00', 'Free', '', "The Wookies have gone into hiding as they spotted Storm Troopers in our exhibition. Can you help us find them amongst our collections?", 'museums-events/event1.jpg', '/example-event/', 'card-light museum-card time-and-tide') }}
        </div>
        <div class="col-12 col-sm-6 col-lg-4">
          {{ generalcard.generalcard('How to be an Elizabethan Trail', 'Acle • Acle Library', 'Monday 17 May 2021 • 10:00 - 16:00', 'Free', '', 'A Beginners guide to the “Golden Age” Ever wanted to know how to fit into Elizabethan society? Well this is your perfect starter guide! Follow the trail to find out some fantastic facts.', 'museums-events/event3.jpg', '/example-event/', 'card-light museum-card elizabethan') }}
        </div>
        <div class="col-12 col-sm-6 col-lg-4">
          {{ generalcard.generalcard('A Fish Tail Trail', 'Acle • Acle Library', 'Monday 17 May 2021 • 10:00 - 16:00', 'Free', '', "It's not Nemo that needs to be found this time, but our local fishy friends. Help them find their tails (and claws) which have been scattered around the museum and learn some fin-tastic facts.", 'museums-events/event2.jpg', '/example-event/', 'card-light museum-card cromer') }}
        </div>
      </div>
      <div class="row {{rowDefaults}}" id="page-3" style="display: none;">
        <div class="col-12 col-sm-6 col-lg-4">
          {{ generalcard.generalcard('A Fish Tail Trail', 'Acle • Acle Library', 'Monday 17 May 2021 • 10:00 - 16:00', 'Free', '', "It's not Nemo that needs to be found this time, but our local fishy friends. Help them find their tails (and claws) which have been scattered around the museum and learn some fin-tastic facts.", 'museums-events/event2.jpg', '/example-event/', 'card-light museum-card cromer') }}
        </div>
        <div class="col-12 col-sm-6 col-lg-4">
          {{ generalcard.generalcard("Where's Wookie?", 'Acle • Acle Library', 'Monday 17 May 2021 • 10:00 - 16:00', 'Free', '', "The Wookies have gone into hiding as they spotted Storm Troopers in our exhibition. Can you help us find them amongst our collections?", 'museums-events/event1.jpg', '/example-event/', 'card-light museum-card time-and-tide') }}
        </div>
      </div>

      <div class="d-flex justify-content-center">
        <nav aria-label="Acle library events pagination"> 
          <ul class="pagination libraries-pagination">
            <li id="page-prev-link" class="page-item disabled">
              <button class="page-link" onclick="prevPage()" tabindex="-1">Previous</button>
            </li>
            <li id="page1-link" class="page-item active">
              <button class="page-link" onclick="showPage(1)">1</button>
            </li>
            <li id="page2-link" class="page-item">
              <button class="page-link" onclick="showPage(2)">2</button>
            </li>
            <li id="page3-link" class="page-item">
              <button class="page-link" onclick="showPage(3)">3</button>
            </li>
            <li id="page-next-link" class="page-item">
              <button class="page-link" onclick="nextPage()">Next</button>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </section>

  <script>
    let currentPage = 1;

    const page1 = document.getElementById("page-1");
    const page2 = document.getElementById("page-2");
    const page3 = document.getElementById("page-3");

    const link1 = document.getElementById("page1-link");
    const link2 = document.getElementById("page2-link");
    const link3 = document.getElementById("page3-link");

    const linkPrev = document.getElementById("page-prev-link");
    const linkNext = document.getElementById("page-next-link");

    window.onload = function() {
      let currentPage = 1;
      page2.style.display = "none";
      page3.style.display = "none";
    }

    function nextPage() {
      if (currentPage >= 3) return;
      showPage(currentPage + 1);
    }

    function prevPage() {
      if (currentPage <= 1) return;
      showPage(currentPage - 1);
    }

    function showPage(pageNum) {
      if (pageNum == 1) {
        page1.style.display = "flex";
        page2.style.display = "none";
        page3.style.display = "none";

        link1.classList.add("active");
        link2.classList.remove("active");
        link3.classList.remove("active");

        linkPrev.classList.add("disabled");
        linkPrev.firstElementChild.tabIndex="-1";
        linkNext.classList.remove("disabled");
        linkNext.firstElementChild.tabIndex="0";
        currentPage = 1;

        //page1.getElementsByTagName('a')[0].focus();

        page1.scrollIntoView();
      } else if (pageNum == 2) {
        page1.style.display = "none";
        page2.style.display = "flex";
        page3.style.display = "none";

        link1.classList.remove("active");
        link2.classList.add("active");
        link3.classList.remove("active");

        linkPrev.classList.remove("disabled");
        linkPrev.firstElementChild.tabIndex="0";
        linkNext.classList.remove("disabled");
        linkNext.firstElementChild.tabIndex="0";
        currentPage = 2;

        //page2.getElementsByTagName('a')[0].focus();

        page2.scrollIntoView();
      } else if (pageNum == 3) {
        page1.style.display = "none";
        page2.style.display = "none";
        page3.style.display = "flex";

        link1.classList.remove("active");
        link2.classList.remove("active");
        link3.classList.add("active");

        linkPrev.classList.remove("disabled");
        linkPrev.firstElementChild.tabIndex="0";
        linkNext.classList.add("disabled");
        linkNext.firstElementChild.tabIndex="-1";
        currentPage = 3;

        //page3.getElementsByTagName('a')[0].focus();

        page3.scrollIntoView();
      } else {
        console.log("pagination error");
      }
    }

    // COOKIES //////////////////////////////////

    function setCookie(cname, cvalue, exdays) {
      const d = new Date();
      d.setTime(d.getTime() + (exdays*24*60*60*1000));
      let expires = "expires="+ d.toUTCString();
      document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }

    function getCookie(cname) {
      let name = cname + "=";
      let decodedCookie = decodeURIComponent(document.cookie);
      let ca = decodedCookie.split(';');
      for(let i = 0; i <ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }

  </script>

{% endblock %}